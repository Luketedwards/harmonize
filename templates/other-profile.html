{% extends "base.html"%}

{% block content %}
<div class="col s12 m8 offset-m2 l6 offset-l3">
  <div class=" grey lighten-5 z-depth-1 ">
    <div class="row valign-wrapper ">
      <div id="profile-header" class="col s12 ">

        <div class="row s12">
          <img src="{{selectedUser.profile_pic}}" alt="" id="profile-image" class="circle  s12 left responsive-img ">
          <!-- notice the "circle" class -->

          <div id="bio-container" class="col s8 center m6">

            <div class="container">
              <div class="row">
                <div class="col s12">
                  <h2>About {{selectedUser.username}}</h2>
                  
                  <span class="follower">Following: {{selectedUser.following|length}}</span>
                  <span class="follower">Followers: {{selectedUser.followers|length}}</span>
                  <div class="card">
                    <div class="card-tabs">
                      <ul class="tabs tabs-fixed-width">
                        <li class="tab"><a class="active" href="#test4">Bio</a></li>
                        <li class="tab"><a class="active" href="#test5">Instruments</a></li>
                        <li class="tab"><a href="#test6">Genres</a></li>
                      </ul>
                    </div>
                    <div class="card-content grey lighten-4">
                      <div id="test4">{{selectedUser.bio}}</div>
                      <div id="test5">
                        <ul>
                          {% for instrument in selectedUser.instruments%}
                          <li>
                            {{instrument}}
                          </li>
                          {%endfor%}
                        </ul>
                      </div>
                      <div id="test6">
                        <ul>
                          {% for genre in selectedUser.genres%}
                          <li>
                            {{genre}}
                          </li>
                          {%endfor%}
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
          
        </div>
        <div class="center-align row s12">
          <a href="#" class=" waves-effect waves-light btn">Contact {{selectedUser.username}}</a>
          {% if selectedUser.username in current_user.following %}
            <a href="{{url_for('unfollow_user', username=selectedUser.username, usernameOther=selectedUser.username )}}" class=" waves-effect waves-light btn">Unfollow {{selectedUser.username}}</a>
          {%endif%}
          {% if selectedUser.username not in current_user.following%}
            <a href="{{url_for('follow_user', username=selectedUser.username, usernameOther=selectedUser.username)}}" class=" waves-effect waves-light btn">Follow {{selectedUser.username}}</a>
          {%endif%}
        </div>
      </div>

    </div>

  </div>

</div>
<div class="row">
  <h2 class="center-align">{{selectedUser.username}}'s Projects</h2>
  {% for project in projects%}
<h2 class="center-align">{{selectedUser.username}} has {{project|length}} existing projects.</h2>
    <div id="my-projects-panel" class="card-panel blue-grey darken-1">
        {%if project.completed == false%}
                <span class="">This project is still active!<i id="my-projects-panel-tick"  class="fa-solid fa-check"></i></span>
                {%else%}
                <span class=""> This project is no longer active.<i id="my-projects-panel-cross" class="fa-solid fa-circle-xmark "></i></span>
                {%endif%}
        <div class="row">     
        <h2 class="center-align">{{project.projectTitle}}</h2>
        <div id="contact-chip" class="chip">
            <img src="{{selectedUser.profile_pic}}" alt="{{selectedUser.username}}'s profile photo">
        <span> Created by: <a href="{{url_for('other_profile', usernameOther=project.username )}}">{{project.username}}</a></span>
        </div>    
        </div>   
        
                <div class="row ">
                    <div class="col s12 center-align">
                        <h4>About the project</h4>
                        <p>{{project.projectDescription}}</p>
                        <p>Project location: {{project.city}}</p>
                    </div>
                </div>
        <div class="row">
            <div class="col s4">
                <h4>About the project</h4>
                <p>{{project.projectDescription}}</p>
                <p>{{project.city}}</p>
            </div>
            <div class="col s4">
                <h4>Instruments & Genre</h4>
                <p>
                    I am looking for:
                    {%for instrument in project.instruments%}
                   <li>{{instrument}}</li> 
                    {%endfor%}
                    The main genre(s) are:
                    {%for genre in project.genres%}
                   <li>{{genre}}</li> 
                    {%endfor%}
                </p>
            </div>
            <div class="row s4 right">
            <div id="projects-panel-apply" class="col s4">
                <span><a class="waves-effect waves-light btn">Apply</a></span>
                
                   
            </div>
            </div>
        </div>
        
    </div>
    
    {% else %} 
    <h2 class="center-align">{{selectedUser.username}} has no projects.</h2>
{%endfor%}   

</div>


</div>
</div>
</span>
</div>

{% endblock %}